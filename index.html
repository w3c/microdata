<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <title>HTML Microdata</title>

  <style>
   /* Styles for SVG */
   rect, ellipse { fill: none}
   .item {stroke: #005; stroke-width: 2}
   .value-box {stroke: #dd0; stroke-width: 2}
   text { font-family: "Arial"; font-size: 14px; fill: #f00 }
   .property, .iteminfo { fill: #00a ; font-size: 8px }
   .value { fill: #000 }
  </style>
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" rel="stylesheet" type="text/css">

  <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async class='remove'></script>
  <script class='remove'>
  var respecConfig = {
    shortName: "microdata",
    specStatus: "ED",
    useExperimentalStyles: true,
    edDraftURI: "https://w3c.github.io/microdata/",
    editors: [{
      name: "Chaals McCathie Nevile",
      mailto: "chaals@yandex-team.ru",
      company: "Yandex / Яндекс",
      companyURL: "http://yandex.com/",
      w3cid: "6222"
    }, {
      name: "Dan Brickley",
      mailto: "danbri@google.com",
      company: "Google, Inc.",
      companyURL: "https://google.com/",
      w3cid: "6350"
    }],
    wg: "Web Platform Working Group",
    wgURI: "https://www.w3.org/WebPlatform/WG/",
    license: 'w3c-software-doc',
    otherLinks: [{
      key: 'Repository',
      data: [{
        value: 'We are on GitHub.',
        href: 'https://github.com/w3c/microdata'
      }, {
        value: 'File a bug.',
        href: 'https://github.com/w3c/microdata/issues'
      }, {
        value: 'Commit history.',
        href: 'https://github.com/w3c/microdata/commits/gh-pages/index.html'
      }]
    },{
      key: 'Mailing list',
      data: [{
        value: 'public-webapps@w3.org',
        href: 'https://lists.w3.org/Archives/Public/public-webapps/'
      }]
    },{
      key: 'Former Editor (Until October 2013)',
      data: [{
        name: "Ian Hickson",
        mailto: "ian@hixie.ch",
        company: "Google, Inc.",
        w3cid: "15392"
      }]
    }],
    wgPatentURI:  "https://www.w3.org/2004/01/pp-impl/83482/status"
  };
  </script>
 </head>

 <body>
 <section id="abstract">
  <p>This specification defines new HTML attributes to embed machine-readable data in HTML documents in a style similar to RDFa.
    It is compatible with JSON, and <em>can</em> be written in a style which is convertible to RDF,
    although two-way conversion is not lossless.</p>
</section>

<section id="sotd">
  <p>This document is an editor's draft for the <a href="https://www.w3.org/WebPlatform/WG/">Web Platform Working Group</a>,
  proposed as an update to the
  <a href="https://www.w3.org/TR/2017/WD-microdata-20170504/">4 May 2017 W3C First Public Working Draft</a>.</p>

  <p>This specification is an extension to HTML. 
  All normative content in the HTML specification not specifically overridden by this specification
  is intended to be normative for this specification. [[!HTML52]]</p>

  <!-- where to send feedback (required) -->
  <p>If you wish to make comments regarding this document please
    <a href="https://github.com/w3c/microdata">submit them as github issues</a>.
    All feedback is welcome, but please note the
    <a href="https://github.com/w3c/microdata/blob/master/CONTRIBUTING.md">contribution guidelines</a>
    require agreement to the terms of the W3C Patent Policy for substantive contributions.</p>
</section>

<!--YYY-->
<section id="dependencies">
<h2>Dependencies</h2>
<p>This specification depends on the HTML specification and its extensions for
   definitions of individual HTML elements and attributes. [[!HTML52]][[html-extensions]]</p>

<p>Information expressed as microdata can be converted to JSON, as described in <a href="#json">Section 6.1</a>. 
  Microdata can be converted to RDF, for example via conversion to JSON-LD or RDFa,
  if additional constraints are applied to the microdata content.
  A process to convert microdata directly to RDF is described in <a href="https://www.w3.org/TR/microdata-rdf">Microdata to RDF</a>.
  [[JSON]] [[rdfa-core]] [[microdata-rdf]]</p>
  

</section>

  <section id="terminology">
  <h2>Terminology</h2>

  <p>For the purposes of this specification, the terms "URL" and "URI" are equivalent.
  The URL specification, and RFC 3986 which uses the term URI, define a <dfn data-lt="url|uri">URL</dfn>,
  <dfn>valid URL</dfn>, and <dfn>absolute URL</dfn>. [[RFC3986]][[URL]]<p>
  <p>A <dfn>valid absolute URL</dfn> is an <a>absolute URL</a> which is <a data-lt="valid URL">valid</a>.</p>

  <p>RFC 3986 defines the term <dfn data-lt="resolving">resolve a URL</dfn> [[!RFC3986]].</p>

  <p>DOM 4.1 defines <dfn><code>textContent</code></dfn> for attributes, and for elements or nodes, 
  as well as the term <dfn id="tree-order">tree order</dfn>. [[!DOM41]]</p><!-- and this spec uses tree order once… badly -->

  <p>This specification relies on the HTML specification to define the following terms: [[!HTML52]]</p>


  <ul>
   <li><dfn>space characters</dfn>, <dfn>split a string on spaces</dfn>, and an
     <dfn>unordered set of unique space-separated tokens</dfn>.</li>
   <li><dfn data-lt="HTML elements">HTML Element</a>, <dfn>global attribute</dfn>, <dfn>boolean attribute</dfn>.</li>
   <li>An element's <dfn>ID</dfn> and <dfn id="language">language</dfn>.</li>
   <li><dfn>flow content</dfn> and <dfn>phrasing content</dfn>.</li>
  </ul>


  </section>


  <section id="conformance">

  <p>The key words "must", "must not", "should", "should not", and "may" in the normative parts of this document
  are to be interpreted as described in RFC2119. [[!RFC2119]]</p>

  <p>Requirements phrased in the imperative as part of algorithms (such as "strip any leading space
  characters" or "return false and abort these steps") are to be interpreted with the meaning of the
  key word ("must", "should", "may", etc) used in introducing the algorithm.</p>

  <div class="example">

   <p>For example, were the spec to say:</p>

   <pre>To eat an orange, the user must:
1. Peel the orange.
2. Separate each slice of the orange.
3. Eat the orange slices.</pre>

   <p>...it would be equivalent to the following:</p>

   <pre>To eat an orange:
1. The user must peel the orange.
2. The user must separate each slice of the orange.
3. The user must eat the orange slices.</pre>

   <p>Here the key word is "must".</p>

   <p>The former (imperative) style is generally preferred in this specification for stylistic
   reasons.</p>

  </div>

  <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any
  manner, so long as the end result is equivalent. (In particular, the algorithms defined in this
  specification are intended to be easy to follow, and not intended to be performant.)</p>

</section>

<section id="sec-navigation-timing">
<h2>Introduction</h2>

<section id="overview">
<h3>Overview</h3>

  <p><i>This section is non-normative.</i></p>
  <p>Sometimes, it is desirable to annotate content with specific machine-readable labels.
  For example, search engines can better identify page content using schema.org annotations,
  and content management systems can find and use information from documents, if it is marked up in a known way.</p>

  <p>Microdata provides a simple mechanism to label content in a document,
    so it can be processed as a set of <a data-lt="concept item">items</a>
    described by name-value pairs.</p>

  <p>Each name-value pair identifies a <a data-lt="item property">property</a> of the item, and a <a data-lt="property value">value</a> of that property.</p>

  <figure>
    <figcaption>
    A common way to represent items, properties and values graphically
    </figcaption>
  <p><svg viewbox="0 0 300 45">
      <g id="diagram1-item">
        <title>An Item</title>
        <ellipse class="item" cx="50" cy="25" rx="40" ry="15"/>
        <text x="35" y="30">Item</text>
      </g>
      <g id="diagram1-property">
        <title>A Property</title>
        <path d="M95,23h90v-8l10,10l-10,10v-8h-90z"/>
        <text x="105" y="19">Property</text>
      </g>
      <g id="diagram1-value">
        <title>A Value</title>
        <rect class="value-box" x="200" y="10" width="80" height="30"/>
        <text x="215" y="30">Value</text>
      </g>
    </svg></p>
    </figure>

    <p>The value of a property may be an item.</p>
</section>

<section id="the-basic-syntax">
<h3>The basic syntax</h3>

  <p><i>This section is non-normative.</i></p>

  <p><a data-lt="concept item">Items</a> and properties are generally represented by regular elements.</p>

  <p>The <a>itemscope</a> attribute creates an <a data-lt="concept item">item</a>.</p>

  <p>The <a>itemprop</a> attribute on a descendent element of an <a data-lt="concept item">item's</a>
    identifies a <a>property</a> of that item.
    Typically, the text content of that element is the <a data-lt="property value">value</a> of that property.</p>

  <div class="example">

   <p>Here there are two items, each of which has the property "name":</p>

   <pre>&lt;div itemscope&gt;
 &lt;p&gt;My name is
  &lt;span itemprop="name"&gt;Elizabeth&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;

&lt;div itemscope&gt;
 &lt;p&gt;My name is 
  &lt;span itemprop="name"&gt;Daniel&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;</pre>

  <figure>
  <figcaption>The example represented graphically: two items, each with a value for the property <code>name</code>
  <p><svg viewbox="0 0 300 105">
    <g id="ex2-first-item">
      <g id="ex2-item1">
        <ellipse class="item" cx="50" cy="30" rx="40" ry="15"/>
        <text x="35" y="35">Item</text>
      </g>
      <g id="ex2-property1">
        <path d="M95,28h90v-8l10,10l-10,10v-8h-90z"/>
        <text x="125" y="24" class="property">name</text>
      </g>
      <g id="ex2-value1">
        <rect class="value-box" x="200" y="15" width="80" height="30"/>
        <text x="210" y="35" class="value">Elizabeth</text>
      </g>
    </g>
    <g id="ex2-second-item">
      <g id="ex2-item2">
        <ellipse class="item" cx="50" cy="80" rx="40" ry="15"/>
        <text x="35" y="85">Item</text>
      </g>
      <g id="ex2-property2">
        <path d="M95,78h90v-8l10,10l-10,10v-8h-90z"/>
        <text x="125" y="74" class="property">name</text>
      </g>
      <g id="ex2-value2">
        <rect class="value-box" x="200" y="65" width="80" height="30"/>
        <text x="210" y="85" class="value">Daniel</text>
      </g>
    </g>
  </svg><p>
  </figure>
  
  </div>

  <p>Markup other than microdata attributes has no effect on microdata.</p>

  <div class="example">

   <p>These two examples are exactly equivalent, at a microdata level, as the previous two examples
   respectively:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p&gt;My &lt;em&gt;name&lt;/em&gt; is
  &lt;span itemprop="name"&gt;E&lt;strong&gt;liz&lt;/strong&gt;abeth&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;

&lt;section&gt;
 &lt;div itemscope&gt;
  &lt;aside&gt;
   &lt;p&gt;My name is
    &lt;span itemprop="name"&gt;&lt;a href="/?user=daniel"&gt;Daniel&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;
  &lt;/aside&gt;
 &lt;/div&gt;
&lt;/section&gt;</pre>

  <p class="warning">Note that this means any information recorded in markup for purposes such as internationalisation
  or accessibility will be lost in the conversion to data.</p>

  </div>

  <p>Properties generally have values that are strings.</p>

  <div class="example">

   <p>Here the item has three properties:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p&gt;My name is &lt;span itemprop="name"&gt;Neil&lt;/span&gt;.&lt;/p&gt;
 &lt;p&gt;My band is called &lt;span itemprop="band"&gt;Four Parts Water&lt;/span&gt;.&lt;/p&gt;
 &lt;p&gt;I am &lt;span itemprop="nationality"&gt;British&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;</pre>

  </div>

  <p>If the text that would normally be the value of a property, such as the element content,
  is unsuitable for recording the property value,
  it can be expressed using the <a>content</a> attribute of the element.</p>

  <div class="example">

   <p>Here, the visible content may be added by a script.
   A microdata processor can extract the content from the <a>content</a> attribute without running scripts. 
   The value of the <var>product-id</var> property for this item is <samp>9678AOU879</samp></p>

   <pre>&lt;li itemscope&gt;
 &lt;span itemprop="product-id" content="9678AOU879"
     class="reference--id_code-autoinsert"&gt;&lt;/span&gt;
&lt;/li&gt;</pre>

  </div>

  <p>When a string value is in some machine-readable format unsuitable to present as the content of an element,
  it can be expressed using the <code title="attr-data-value">value</code> attribute of the <code>data</code> element,
  as long as there is no <a>content</a> attribute.</p>

  <div class="example">

   <p>Here, there is an item with a property whose value is a product identifier. The identifier is not
   human-friendly, so instead it is encoded for microdata using the <code>value</code> attribute
   of the <code>data</code> element, and the product's name is used as the text content of the element
   that is rendered on the page.</p>

   <pre>&lt;h1 itemscope&gt;
 &lt;data itemprop="product-id" value="9678AOU879"&gt;The Instigator 2000&lt;/data&gt;
&lt;/h1&gt;</pre>

   <p class="warning">This will not work if there is a <a>content</a> attribute as well. In the following example,
    the value of the <var>product-id</var> property is taken from the <a>content</a> attribute, so it will be
    <samp>This one rocks!</samp>:</p>

   <pre>&lt;h1 itemscope&gt;
 &lt;data itemprop="product-id" value="9678AOU879" 
   content="This one rocks!"&gt;The Instigator 2000&lt;/data&gt;
&lt;/h1&gt;</pre>

  </div>

  <p>When an <a>itemprop</a> is used on an element that can have a <code>src</code> or <code>href</code> attribute,
    such as links and media elements, that <em>does not</em> have a <a>content</a> attribute,
    the value of the name-value pair is an <a>absolute URL</a> based on the 
    <code>src</code> or <code>href</code> attribute (or the empty string if they are missing or there is an error).</p>

  <div class="example">

   <p>In this example, the item has one property, <var>logo</var>, whose value is a URL based on the location of the page, and ending with <samp>our-logo.png</samp>:</p>

   <pre>&lt;div itemscope itemtype="https://schema.org/LocalBusiness"&gt;
 &lt;img itemprop="logo" src="our-logo.png" alt="Our Company"&gt;
&lt;/div&gt;</pre>

   <p class="warning">Note that accessibility information, such as the <code>alt</code> attribute in the previous example,
     is ignored. To provide that as a value, repeat it in a <a>content</a> attribute. In the following example, the value
     of the <var>name</var> property is <samp>The Company</samp>:</p>

   <pre>&lt;div itemscope itemtype="https://schema.org/LocalBusiness"&gt;
 &lt;img itemprop="name" src="our-logo.png"
     content="The Company" alt="Our Company"&gt;
&lt;/div&gt;</pre>

  </div>

  <p>For numeric data, the <code>meter</code> element and its <code title="attr-meter-value">value</code> attribute
  can be used instead, as long as there is no <a>content</a> attribute.</p>

  <div class="example">

   <p>Here a rating of <samp>3.5</samp> is given using a <code>meter</code> element.</p>

   <pre>&lt;div itemscope itemtype="https://schema.org/Product"&gt;
 &lt;span itemprop="name"&gt;Panasonic White 60L Refrigerator&lt;/span&gt;
 &lt;img src="panasonic-fridge-60l-white.jpg" alt=""&gt;
  &lt;div itemprop="aggregateRating"
       itemscope itemtype="https://schema.org/AggregateRating"&gt;
   &lt;meter itemprop="ratingValue" min=0 value=3.5 max=5&gt;Rated 3.5/5&lt;/meter&gt;
   (based on &lt;span itemprop="reviewCount"&gt;11&lt;/span&gt; customer reviews)
  &lt;/div&gt;
&lt;/div&gt;</pre>

  </div>

  <p>Similarly, for date- and time-related data, the <code>time</code> element and its
  <code>datetime</code> attribute can be used to specify a specifically formatted date or time,
  as long as there is no <a>content</a> attribute.</p>

  <div class="example">

   <p>In this example, the item has one property, "birthday", whose value is a date:</p>

   <pre>&lt;div itemscope&gt;
 I was born on &lt;time itemprop="birthday" datetime="2009-05-10"&gt;May 10th 2009&lt;/time&gt;.
&lt;/div&gt;</pre>

  </div>

  <p>Properties can also themselves be groups of name-value pairs, by putting the
  <code><a>itemscope</a></code> attribute
  on the element that declares the property.</p>

  <p>Items that are not part of others are called <a data-lt="top-level microdata item">top-level microdata items</a>.</p>

  <div class="example">

   <p>In this example, the outer item represents a person, and the inner one represents a band:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p&gt;Name: &lt;span itemprop="name"&gt;Amanda&lt;/span&gt;&lt;/p&gt;
 &lt;p&gt;Band: &lt;span itemprop="band" itemscope&gt; &lt;span itemprop="name"&gt;Jazz Band&lt;/span&gt; (&lt;span itemprop="size"&gt;12&lt;/span&gt; players)&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>The outer item here has two properties, "name" and "band". The "name" is "Amanda", and the
   "band" is an item in its own right, with two properties, "name" and "size". The "name" of the
   band is "Jazz Band", and the "size" is "12".</p>

   <p>The outer item in this example is a top-level microdata item.</p>

  </div>

  <p>Properties that are not descendants of the element with the
  <code><a>itemscope</a></code> attribute
  can be associated with the <a data-lt="concept item">item</a> using the
  <code><a>itemref</a></code> attribute.
  This attribute takes a list of <a>ID</a>s of elements to crawl in addition to crawling the children of
  the element with the <code><a>itemscope</a></code> attribute.</p>

  <div class="example">

   <p>This example is the same as the previous one, but all the properties are separated from their
   <a data-lt="concept item">items</a>:</p>

   <pre>&lt;div itemscope id="amanda" itemref="a b"&gt;&lt;/div&gt;
&lt;p id="a"&gt;Name: &lt;span itemprop="name"&gt;Amanda&lt;/span&gt;&lt;/p&gt;
&lt;div id="b" itemprop="band" itemscope itemref="c"&gt;&lt;/div&gt;
&lt;div id="c"&gt;
 &lt;p&gt;Band: &lt;span itemprop="name"&gt;Jazz Band&lt;/span&gt;&lt;/p&gt;
 &lt;p&gt;Size: &lt;span itemprop="size"&gt;12&lt;/span&gt; players&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>This gives the same result as the previous example. The first item has two properties, "name",
   set to "Amanda", and "band", set to another item. That second item has two further properties,
   "name", set to "Jazz Band", and "size", set to "12".</p>

  </div>

  <p>An <a data-lt="concept item">item</a> can have multiple properties with the same name and
  different values.</p>

  <div class="example">

   <p>This example describes an ice cream, with two flavors:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p&gt;Flavors in my favorite ice cream:&lt;/p&gt;
 &lt;ul&gt;
  &lt;li itemprop="flavor"&gt;Lemon sorbet&lt;/li&gt;
  &lt;li itemprop="flavor"&gt;Apricot sorbet&lt;/li&gt;
 &lt;/ul&gt;
&lt;/div&gt;</pre>

   <p>This thus results in an item with two properties, both "flavor", having the values "Lemon
   sorbet" and "Apricot sorbet".</p>

  </div>

  <p>An element introducing a property can also introduce multiple properties at once, to avoid
  duplication when some of the properties have the same value.</p>

  <div class="example">

   <p>Here we see an item with two properties, "favorite-color" and "favorite-fruit", both set to
   the value "orange":</p>

   <pre>&lt;div itemscope&gt;
 &lt;span itemprop="favorite-color favorite-fruit"&gt;orange&lt;/span&gt;
&lt;/div&gt;</pre>

  </div>

  <p>It's important to note that there is no relationship between the microdata and the content of
  the document where the microdata is marked up.</p>

  <div class="example">

   <p>The following two examples are exactly the same microdata, because they produce exactly the same information when processed:</p>

   <pre>&lt;figure&gt;
 &lt;img src="castle.jpeg"&gt;
 &lt;figcaption&gt;&lt;span itemscope&gt;&lt;span
  itemprop="name"&gt;The Castle&lt;/span&gt;&lt;/span&gt; (1986)&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

   <pre>&lt;span itemscope&gt;&lt;meta itemprop="name"
 content="The Castle"&gt;&lt;/span&gt;
&lt;figure&gt;
 &lt;img src="castle.jpeg"&gt;
 &lt;figcaption&gt;The Castle (1986)&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

   <p>Both have a figure with a caption, and both, completely unrelated to the figure, have an item
   with a name-value pair with the name "name" and the value "The Castle".
   In neither case is the image in any way associated with the item.</p>

  </div>

</section>

<section id="typed-items">
<h3>Typed items</h3>

  <p><i>This section is non-normative.</i></p>
  <p>The examples in the previous section show how information could be marked up on a page that
  doesn't expect its microdata to be re-used. Microdata is most useful, though, when it is used in
  contexts where other authors and readers are able to cooperate to make new uses of the markup.</p>

  <p>For this purpose, it is necessary to give each <a data-lt="concept item">item</a> a type,
  such as "http://example.com/person", or "http://example.org/cat", or "http://band.example.net/".
  Types are identified as <a data-lt="URL">URLs</a>.</p>

  <p>The type for an <a data-lt="concept item">item</a> is given as the value of an
  <code><a>itemtype</a></code> attribute on the same element as the
  <code><a>itemscope</a></code> attribute. The value is a URL, which determines the <a>vocabulary identifier</a> for properties</p>

  <div class="example">

   <p>Assuming a page at http://example.net/some/dataexample contains the following code:</p>

<pre>&lt;section itemscope itemtype="http://example.org/animals#cat"&gt;
 &lt;h1 itemprop="name"&gt;Hedral&lt;/h1&gt;
 &lt;p itemprop="desc"&gt;Hedral is a male american domestic
 shorthair, with a fluffy black fur with white paws and belly.&lt;/p&gt;
 &lt;img itemprop="img" src="hedral.jpeg" alt="" title="Hedral, age 18 months"&gt;
&lt;/section&gt;</pre>

   <p>The item's type is "http://example.org/animals#cat"</p>

   <p>In this example the "http://example.org/animals#cat" item has three properties:<p>

   <dl>
    <dt><samp>http://example.org/animals#name</samp></dt>
     <dd>"Hedral"</dd>
    <dt><samp>http://example.org/animals#desc</samp></dt>
     <dd>Hedral is a male american domestic shorthair, with a fluffy black fur with white paws and belly.
    <dt><samp>http://example.org/animals#img</samp></dt>
     <dd>hedral.jpeg</dd>
   </dl>

  </div>

  <p>The type gives the context for the properties, thus selecting a vocabulary: a property named
  "class" given for an item with the type "http://census.example/person" might refer to the economic
  class of an individual, while a property named "class" given for an item with the type
  "http://example.com/school/teacher" might refer to the classroom a teacher has been assigned.
  A vocabulary may define several types. For example, the types
  "<code>http://example.org/people/teacher</code>" and "<code>http://example.org/people/engineer</code>"
  could be defined in the same vocabulary. Some properties might not be especially useful in both cases:
  the "<code>classroom</code>" property  might not be meaningful with the "<code>http://example.org/people/engineer</code>" type.
  Multiple types from the same vocabulary can be given for a single item by listing the URLs, separated by spaces,
  in the attribute's value. An item cannot be given two types if they do not use the same vocabulary, however.</p>

</section>

<section id="global-identifiers-for-items">
<h3>Global identifiers for items</h3>

  <p><i>This section is non-normative.</i></p>
  <p>Sometimes, an <a data-lt="concept item">item</a> gives information about a topic that has a
  global identifier. For example, books can be identified by their ISBN number, or concepts can be identified by a URL as in [[rdf-primer]].</p>

  <p>The <code><a>itemtype</a></code> attribute associates an <a data-lt="concept item">item</a> with a global identifier
  in the form of a <a data-lt="URL">URLs</a>.</p>

  <div class="example">

   <p>Here, an item is talking about a particular book:</p>

<pre>&lt;dl itemscope
    itemtype="http://vocab.example.net/book"
    <strong>itemid="urn:isbn:0-330-34032-8"</strong>&gt;
 &lt;dt&gt;Title
 &lt;dd itemprop="title"&gt;The Reality Dysfunction
 &lt;dt&gt;Author
 &lt;dd itemprop="author"&gt;Peter F. Hamilton
 &lt;dt&gt;Publication date
 &lt;dd&gt;&lt;time itemprop="pubdate" datetime="1996-01-26"&gt;26 January 1996&lt;/time&gt;
&lt;/dl&gt;</pre>

  </div>

</section>

<section id="selecting-names-when-defining-vocabularies">
<h3>Selecting names when defining vocabularies</h3>

  <p><i>This section is non-normative.</i></p>
  <p>Using microdata means using a vocabulary. For some purposes an ad-hoc vocabulary is adequate, 
  but authors are encouraged to re-use existing vocabularies to make content re-use easier.</p>

  <p>When designing new vocabularies, identifiers can be created either using
  <a>URL</a>s, or, for properties, as plain words (with no dots or colons). For URLs,
  conflicts with other vocabularies can be avoided by only using identifiers that correspond to
  pages that the author has control over.</p>

  <div class="example">

   <p>For instance, if Jon and Adam both write content at <code>example.com</code>, at
   <code>http://example.com/~jon/...</code> and <code>http://example.com/~adam/...</code> respectively, then
   they could select identifiers of the form
   "http://example.com/~jon/name" and "http://example.com/~adam/name"
   respectively.</p>

  </div>

  <p>Properties whose names are just plain words can only be used within the context of the types
  for which they are intended; properties named using URLs can be reused in items of any type. If an
  item has no type, and is not part of another item, then if its properties have names that are just
  plain words, they are not intended to be globally unique, and are instead only intended for
  limited use. Generally speaking, authors are encouraged to use either properties with globally
  unique names (URLs) or ensure that their items are typed.</p>

  <div class="example">

   <p>Here, an item in the page http://example.net/some/dataexample is an "http://example.org/animals/cat",
   and most of the properties have names defined in the context of that type.
   There are also a few additional properties whose names come from other vocabularies.</p>

<pre>&lt;section itemscope itemtype="http://myvocab.example.org/animals/cat"&gt;
 &lt;h1 itemprop="name http://example.com/fn"&gt;Hedral&lt;/h1&gt;
 &lt;p itemprop="desc"&gt;Hedral is a male american domestic
 shorthair, with a fluffy &lt;span
 itemprop="http://example.com/color"&gt;black&lt;/span&gt; fur with &lt;span
 itemprop="http://example.com/color"&gt;white&lt;/span&gt; paws and belly.&lt;/p&gt;
 &lt;img itemprop="img" src="hedral.jpeg" alt="" title="Hedral, age 18 months"&gt;
&lt;/section&gt;</pre>

   <p>This example has one item with the type "http://myvocab.example.org/animals/cat" and the following
   properties:</p>

   <dl>
    <dt>http://myvocab.example.org/animals/name</dt>
     <dd>Hedral<dd>
    <dt>http://example.com/fn</dt>
     <dd>Hedral</dd>
    <dt>http://myvocab.example.org/animals/desc</dt>
     </dd>Hedral is a male american domestic shorthair, with a fluffy black fur with white paws and belly.</dd>
    <dt>http://example.com/color</dt>
     <dd>black</dd>
    <dt>http://example.com/color</dt>
     <dd>white</dd></tr><tr>
    <dt>http://myvocab.example.org/animals/img</dt>
     <dd>http://example.net/some/hedral.jpeg</dd>
   </dl>

  </div>
</section>
</section>

<section id="encoding-microdata">
<h2>Encoding microdata</h2>

<section id="the-microdata-model">
<h3>The microdata model</h3>

  <p>The microdata model consists of groups of name-value pairs known as <a data-lt="concept item">items</a>.</p>

  <p>Each group is known as an <a data-lt="concept item">item</a>. Each
  <a data-lt="concept item">item</a> can have <a href="#item-types">item types</a>,
  a <a href="#global-identifier">global identifier</a>, and a list of name-value pairs.
  Each name in the name-value pair is known as a <a data-lt="item properties">property</a>,
  and each <a data-lt="item properties">property</a> has one or more <a data-lt="property value">values</a>.
  Each <a data-lt="property value">value</a> is either a string or itself a group of name-value pairs
  (an <a data-lt="concept item">item</a>).
  The names are unordered relative to each other, but if a particular name has multiple values, they do have a relative order.</p>
</section>

<section id="items">
<h3>Items: <a>itemscope</a>, <a>itemtype</a>, and <a>itemid</a>.</h3>

  <p>Every <a data-lt="HTML elements">HTML element</a> may have an
  <dfn><code>itemscope</code></dfn> attribute specified.
  The <code><a>itemscope</a></code> attribute is a <a>boolean attribute</a>.</p>

  <p>An element with the <code><a>itemscope</a></code> attribute specified
  creates a new <dfn data-lt="concept item">item</dfn>, a group of name-value pairs
  that describe properties, and their values, of the thing represented by that element.</p>

  <hr>

  <p>Elements with an <code><a>itemscope</a></code> attribute may have an
  <dfn><code>itemtype</code></dfn> attribute specified, to give the
  <a href="#item-types">item types</a> of the <a data-lt="concept item">item</a>.</p>

  <p>The <code><a>itemtype</a></code> attribute, if specified, must have a value that
  is an <a>unordered set of unique space-separated tokens</a> that are
  <span>case-sensitive</span>, each of which is a <a>valid absolute
  URL</a>, and all of which are in the same vocabulary. The attribute's value must
  have at least one token.</p>

  <p>The <dfn id="item-types">item types</dfn> of an <a data-lt="concept item">item</a> are the tokens obtained
  by <a data-lt="split a string on spaces">splitting the element's <code>itemtype</code> attribute's value on spaces</a>.
  If the <code><a>itemtype</a></code> attribute is missing or parsing it
  in this way finds no tokens, the <a data-lt="concept item">item</a> is said to have no
  <a href="#item-types">item types</a>.</p>

  <p>The <a href="#item-types">item types</a> determine the <dfn>vocabulary identifier</dfn>. This is a URL
  that is prepended to <a>property names</a>, which identifies them as part of their vocabulary.
  The value of the vocabulary identifier for an item is determined as follows:</p>

  <ul>
   <li>Let <var>potential values</var> be an empty array of URLs.</li>
   <li>Let <var>tokens</a> be the value of the <a>itemtype</a> attribute, split on spaces.</li>
   <li>For each value of <var>tokens</var>: <dl class="switch">
    <dt>If there is a NUMBER SIGN Ux0023 ("#") in the value</dt>
     <dd>Append the substring of the value from the beginning to the <em>first</em> NUMBER SIGN Ux0023 ("#") to
      <var>potential values</var></dd>
    <dt>Otherwise, if there is a SOLIDUS Ux002F ("/") in the value</dt>
     <dd>Append the substring of the value from the beginning to the <em>last</em> SOLIDUS Ux002F ("/") to
      <var>potential values</var></dd>
    <dt>Otherwise</dt>
     <dd>Append a SOLIDUS Ux002F ("/") to the value, and append the resulting string to <var>potential values</var></dd>
    </dl></li>
   <li>If there is only one unique value in <var>potential values</value> return that value. Otherwise return the 
    first item in <var>potential values</var>.</li>
  </li>

   <p>User agents must not automatically dereference <em>unknown</em> <a data-lt="URL">URLs</a> given as <a>item types</a>
   and <a>property names</a>. These URLs are <i>a priori</i> opaque identifiers.</p>

   <p class="note">A specification could define that its <a href="#item-types" title="item types">item type</a>
   can be derefenced to provide the user with help information. Vocabulary authors are encouraged to provide useful information
   at the given <a href="#url">URL</a>, either in prose or a formal language such as RDF. User agents are
   </p>

  <p>The <code><a>itemtype</a></code> attribute must not be specified on elements
  that do not have an <code><a>itemscope</a></code> attribute specified.</p>

  <hr>

  <p>An <a data-lt="concept item">item</a> is said to be a <dfn>typed item</dfn>
  when either it has an <a href="#item-types" title="item types">item type</a>, or it is the
  <a data-lt="property value">value</a> of a <a data-lt="item properties">property</a> of a <a>typed item</a>.
  The <dfn id="relevant-types">relevant types</dfn> for a <a>typed item</a> is the
  <a data-lt="concept item">item</a>'s <a href="#item-types">item types</a>, if it has any,
  or else is the <a href="#relevant-types">relevant types</a> of the <a data-lt="concept item">item</a>
  for which it is a <a data-lt="item properties">property</a>'s <a data-lt="property value">value</a>.</p>

  <hr>

  <p>Elements with both <a>itemscope</a> and <a>itemtype</a> attributes
  may also have an <dfn><code>itemid</code></dfn> attribute specified,
  to give a global identifier for the <a data-lt="concept item">item</a>,
  so that it can be related to other <a data-lt="concept item">items</a> elsewhere on the Web,
  or with concepts beyond the Web such as ISBN numbers for published books.</p>

  <p>The <code><a>itemid</a></code> attribute, if specified, must have a value that is
  a <a>valid URL</a> potentially surrounded by <a>space characters</a>.</p>

  <p>The <dfn id="global-identifier">global identifier</dfn> of an <a data-lt="concept item">item</a>
  is the value of its element's <code><a>itemid</a></code> attribute, if it has one,
  <a data-lt="resolve a url">resolved</a> relative to the element on which the attribute is specified.
  If the <code><a>itemid</a></code> attribute is missing or if resolving it fails, it
  is said to have no <a href="#global-identifier">global identifier</a>.</p>

  <p>The <code><a>itemid</a></code> attribute must not be specified on elements
  that do not have both an <code><a>itemscope</a></code> attribute and an
  <code><a>itemtype</a></code> attribute specified.</p>

  <hr>

  <div class="example">

   <p>This example shows a simple vocabulary used to describe the products of a model railway
   manufacturer. The vocabulary has just five property names:</p>

   <dl>
    <dt>product-code</dt>
    <dd>A number that identifies the product in the manufacturer's catalog.</dd>
    <dt>name</dt>
    <dd>A brief description of the product.</dd>
    <dt>scale</dt>
    <dd>One of "HO", "1", or "Z" (potentially with leading or trailing
    whitespace), indicating the scale of the product.</dd>
    <dt>digital</dt>
    <dd>If present, one of "Digital", "Delta", or "Systems"
    (potentially with leading or trailing whitespace) indicating that
    the product has a digital decoder of the given type.</dd>
    <dt>track-type</dt>
    <dd>For track-specific products, one of "K", "M", "C" (potentially
    with leading or trailing whitespace) indicating the type of track
    for which the product is intended.</dd>
   </dl>

   <p>This vocabulary has four defined <a href="#item-types">item types</a>:</p>

   <dl>
    <dt>http://md.example.com/loco</dt>
    <dd>Rolling stock with an engine</dd>
    <dt>http://md.example.com/passengers</dt>
    <dd>Passenger rolling stock</dd>
    <dt>http://md.example.com/track</dt>
    <dd>Track pieces</dd>
    <dt>http://md.example.com/lighting</dt>
    <dd>Equipment with lighting</dd>
   </dl>

   <p>Each <a data-lt="concept item">item</a> that uses this vocabulary can be given one or more
   of these types, depending on what the product is.</p>

   <p>Thus, a locomotive might be marked up as:</p>

<pre>&lt;dl itemscope itemtype="http://md.example.com/loco
                        http://md.example.com/lighting"&gt;
 &lt;dt&gt;Name:
 &lt;dd itemprop="name"&gt;Tank Locomotive (DB 80)
 &lt;dt&gt;Product code:
 &lt;dd itemprop="product-code"&gt;33041
 &lt;dt&gt;Scale:
 &lt;dd itemprop="scale"&gt;HO
 &lt;dt&gt;Digital:
 &lt;dd itemprop="digital"&gt;Delta
&lt;/dl&gt;</pre>

   <p>A turnout lantern retrofit kit might be marked up as:</p>

   <pre>&lt;dl itemscope itemtype="http://md.example.com/track
                       http://md.example.com/lighting"&gt;
 &lt;dt&gt;Name:
 &lt;dd itemprop="name"&gt;Turnout Lantern Kit
 &lt;dt&gt;Product code:
 &lt;dd itemprop="product-code"&gt;74470
 &lt;dt&gt;Purpose:
 &lt;dd&gt;For retrofitting 2 &lt;span itemprop="track-type"&gt;C&lt;/span&gt; Track
 turnouts. &lt;meta itemprop="scale" content="HO"&gt;
&lt;/dl&gt;</pre>

   <p>A passenger car with no lighting might be marked up as:</p>

   <pre>&lt;dl itemscope itemtype="http://md.example.com/passengers"&gt;
 &lt;dt&gt;Name:
 &lt;dd itemprop="name"&gt;Express Train Passenger Car (DB Am 203)
 &lt;dt&gt;Product code:
 &lt;dd itemprop="product-code"&gt;8710
 &lt;dt&gt;Scale:
 &lt;dd itemprop="scale"&gt;Z
&lt;/dl&gt;</pre>

   <p>Great care is necessary when creating new vocabularies. Often, a hierarchical approach to
   types can be taken that results in a vocabulary where each item only ever has a single type,
   which is generally much simpler to manage.</p>

  </div>

</section>

<section id="names:-the-itemprop-attribute">
<h3>Properties: the <dfn data-lt="attr-itemprop"><code>itemprop</code></dfn> and <a>itemref</a> attributes</h3>

  <p>The <a>itemprop</a> attribute, when added to any <a data-lt="HTML elements">HTML element</a>
    that is part of an <a>item</a>, identifies a <dfn>property</dfn> of that item.
    The attribute must be an <a>unordered set of unique space-separated tokens</a>,
    representing the <span>case-sensitive</span> names of the properties that it adds. The
    attribute must contain at least one token.</p>

  <p>Each token must be either a <a>valid absolute URL</a> or a a string that contains no "." (U+002E) characters
   and no ":" (U+003A) characters.</p>

  <p>Vocabulary specifications must not define property names for Microdata
  that contain "." (U+002E) characters, ":" (U+003A) characters,
  nor <a>space characters</a> (defined in [[!HTML52]] as U+0020, U+0009, U+000A, U+000C, and U+000D).</p>

  <p>The <dfn>property names</dfn> of an element are determined as follows:</p>

  <ul>

   <li>Let <var>tokens</var> be the values of the <a>itemprop</a> attribute,
     <a data-lt="split a string on spaces">Split on spaces</a>.</li>
   <li>Let <var>properties</var> be an empty array of strings.</li>

   <li>For each value of <var>token</var>, in order: <dl class="switch">
    <dt>If the value is a repeated occurrence of an earlier value</dt>
     <dd>discard it and process the next value</dd>
    <dt>If the value is an <a>absolute URL</a></dt>
     <dd>append it to <var>properties</var>, then process the next value</dd> 
    <dt>Otherwise, if the the element is a <a>typed item</a>:</dt>
     <dd>Append the value to the <a>vocabulary identifier</a> for the item. If the the resulting value
      does not match any value in <var>properties</var>, then append it to <var>properties</var>, 
      and process the next value.</dd>
    <dt>Otherwise</dt>
     <dd>append the value to <var>properties</var> and process the next value.</dd></li>

   <li>If <var>properties</var> is not empty, return <var>properties</var>.</li> 
  </ul>

  <p>Within an <a data-lt="concept item">item</a>, the properties are unordered with respect to
  each other, except for properties with the same name, which are ordered in the order they are
  given by the algorithm that defines <a>the properties of an item</a>.</p>

  <div class="example">

   <p>In the following example, the "a" property has the values "1" and "2", <em>in that order</em>,
   but whether the "a" property comes before the "b" property or not is not important:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p itemprop="a"&gt;1&lt;/p&gt;
 &lt;p itemprop="a"&gt;2&lt;/p&gt;
 &lt;p itemprop="b"&gt;test&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>Thus, the following is equivalent:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p itemprop="b"&gt;test&lt;/p&gt;
 &lt;p itemprop="a"&gt;1&lt;/p&gt;
 &lt;p itemprop="a"&gt;2&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>As is the following:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p itemprop="a"&gt;1&lt;/p&gt;
 &lt;p itemprop="b"&gt;test&lt;/p&gt;
 &lt;p itemprop="a"&gt;2&lt;/p&gt;
&lt;/div&gt;</pre>

  </div>

  <hr>

  <p>Elements with an <code><a>itemscope</a></code> attribute may have an
  <dfn><code>itemref</code></dfn> attribute specified, to give a list of additional
  elements to crawl to find the name-value pairs of the <a data-lt="concept item">item</a>.</p>

  <p>The <code><a>itemref</a></code> attribute, if specified, must have a value that
  is an <a>unordered set of unique space-separated tokens</a> that are
  <span>case-sensitive</span>, consisting of <a>ID</a>s of elements in the same document.</p>

  <p>The <code><a>itemref</a></code> attribute must not be specified on elements that
  do not have an <code><a>itemscope</a></code> attribute specified.</p>

  <div class="example">

   <p>The preceding example:</p>

   <pre>&lt;div itemscope&gt;
 &lt;p itemprop="a"&gt;1&lt;/p&gt;
 &lt;p itemprop="a"&gt;2&lt;/p&gt;
 &lt;p itemprop="b"&gt;test&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>Could also be written as follows:</p>

   <pre>&lt;div id="x"&gt;
 &lt;p itemprop="a"&gt;1&lt;/p&gt;
&lt;/div&gt;
&lt;div itemscope itemref="x"&gt;
 &lt;p itemprop="b"&gt;test&lt;/p&gt;
 &lt;p itemprop="a"&gt;2&lt;/p&gt;
&lt;/div&gt;
</pre>

  </div>

  <p>When an element with an <code><a>itemprop</a></code> attribute <a data-lt="item properties">adds a property</a>
  to multiple <a data-lt="concept item">items</a>, the requirement above regarding the tokens applies for each
  <a data-lt="concept item">item</a> individually.</p>

  <div class="example">

     <p>For the following code:</p>

<pre><code>&lt;div itemscope itemtype="http://example.com/a"&gt; &lt;ref itemred="x"&gt; &lt;/div&gt;
&lt;div itemscope itemtype="http://example.com/b"&gt; &lt;ref itemref="x"&gt; &lt;/div&gt;
&lt;meta id="x" itemprop="z" content=""&gt;</code></pre>

     <p>The author should be certain that <samp>z</samp> is a valid property name for both the
     http://example.com/a and http://example.com/b vocabularies.</p>

  </div>



</section>

<section id="values">
<h3>Values: the <dfn><code>content</code></dfn> attribute.</h3>


  <p>The algorithm to determine the <dfn data-lt="property value">value</dfn> for a name-value pair
  is given by applying the first matching case in the following list:</p>

  <dl class="switch">

   <dt>If the element also has an <code><a>itemscope</a></code> attribute</dt>

   <dd>
    <p>The value is the <a data-lt="concept item">item</a> created by the element.</p>
   </dd>


   <dt>If the element has a <a>content</a> attribute</dt>

   <dd>
    <p>The value is the <a>textContent</a> of the element's <a>content</a> attribute.</p>
   </dd>
   <dd class="note">
    <p>HTML only allows the <a>content</a> attribute on the <code>meta</code> element. 
    This specification changes the content model to allow it on any element, as a <a>global attribute</a>.</p>
   </dd>


   <dt>If the element is an <code>audio</code>, <code>embed</code>, <code>iframe</code>,
   <code>img</code>, <code>source</code>, <code>track</code>, or <code>video</code> element</dt>

   <dd>
    <p>If the element has a <code>src</code> attribute,
    let <var>proposed value</var> be the result of <a>resolving</a> that attribute's <a>textContent</a>.
    If <var>proposed value</var> is a <a>valid absolute URL</a>: The value is <var>proposed value</var>.<br>
    <i>otherwise</i> The value is the empty string.</p>
   </dd>


   <dt>If the element is an <code>a</code>, <code>area</code>, or <code>link</code> element</dt>

   <dd>
    <p>If the element has an <code>href</code> attribute,
    let <var>proposed value</var> be the result of <a>resolving</a> that attribute's <a>textContent</a>.
    If <var>proposed value</var> is a <a>valid absolute URL</a>: The value is <var>proposed value</var>.<br>
    <i>otherwise</i> The value is the empty string.</p>
   </dd>


   <dt>If the element is an <code>object</code> element</dt>

   <dd>
    <p>If the element has a <code>data</code> attribute,
    let <var>proposed value</var> be the result of <a>resolving</a> that attribute's <a>textContent</a>.
    If <var>proposed value</var> is a <a>valid absolute URL</a>: The value is <var>proposed value</var>.<br>
    <i>otherwise</i> The value is the empty string.</p>
   </dd>


    <dt>If the element is a <code>data</code> or <code>meter</code> element</dt>

   <dd>
    <p>If the element has a <code>value</code> attribute, the value is that attribute's <a>textContent</a>.</p>
   </dd>


   <dt>If the element is a <code>time</code> element</dt>

   <dd>
    <p>If the element has a <code>datetime</code> attribute, the value is that attribute's <a>textContent</a>.</p>
   </dd>


   <dt>Otherwise</dt>

   <dd>
    <p>The value is the element's <code>textContent</code>.</p>
   </dd>

  </dl>

  <p>The <dfn>URL property elements</dfn> are the <code>a</code>, <code>area</code>,
  <code>audio</code>, <code>embed</code>, <code>iframe</code>, <code>img</code>, <code>link</code>,
  <code>object</code>, <code>source</code>, <code>track</code>, and <code>video</code> elements.</p>

  <p>If a property's <a data-lt="property value">value</a>, as defined by the property's
  definition, is an <a>absolute URL</a>, the property must be specified using a
  <a data-lt="URL property elements">URL property element</a>.</p>

  <p class="note">These requirements do not apply just because a property value happens to match the
  syntax for a URL. They only apply if the property is explicitly defined as taking such a
  value.</p>

  <p class="example">For example, a book about the first moon landing <!-- 1969-07-20 --> could be
  called "mission:moon". A "title" property from a vocabulary that defines a title as being a string
  would not expect the title to be given in an <code>a</code> element, even though it looks like a
  <a>URL</a>. On the other hand, if there was a (rather narrowly scoped!) vocabulary for
  "books whose titles look like URLs" which had a "title" property whose content was defined as a URL, then the
  property <em>would</em> expect the title to be given in an <code>a</code> element (or one of the
  other <a>URL property elements</a>), because of the requirement above.</p>
</section>

<section id="associating-names-with-items">
<h3>Associating names with items</h3>

  <p>To find <dfn data-lt="item properties">the properties of an item</dfn> defined by the element <var>root</var>,
  the user agent must run the following steps. These steps are also used to flag
  <a>microdata error</a>s.</p>

  <ol>

   <li><p>Let <var>results</var>, <var>memory</var>, and <var>pending</var> be
   empty lists of elements.</p></li>

   <li><p>Add the element <var>root</var> to <var>memory</var>.</p></li>

   <li><p>Add the child elements of <var>root</var>, if any, to <var>pending</var>.</p></li>

   <li><p>If <var>root</var> has an <code><a>itemref</a></code> attribute,
   <a data-lt="split a string on spaces">split the value of that <code>itemref</code> attribute on spaces</a>.
   For each resulting token <var>ID</var>, if there is an element in the document whose <a>ID</a> is <var>ID</var>,
   then add the first such element to <var>pending</var>.</p></li>

   <li><p><i>Loop</i>: If <var>pending</var> is empty, jump to the step labeled <i>end of
   loop</i>.</p></li>

   <li><p>Remove an element from <var>pending</var> and let <var>current</var> be
   that element.</p></li>

   <li><p>If <var>current</var> is already in <var>memory</var>, there is a
   <a>microdata error</a>; return to the step labeled <i>loop</i>.</p></li>

   <li><p>Add <var>current</var> to <var>memory</var>.</p></li>

   <li><p>If <var>current</var> does not have an
   <code><a>itemscope</a></code> attribute, then:
   add all the child elements of <var>current</var> to <var>pending</var>.</p></li>

   <li><p>If <var>current</var> has an
   <code><a>itemprop</a></code>
   attribute specified and has one or more <a href="#property-names">property names</a>, then add
   <var>current</var> to <var>results</var>.</p></li>

   <li><p>Return to the step labeled <i>loop</i>.</p></li>

   <li><p><i>End of loop</i>: Sort <var>results</var> in <a href="#tree-order">tree order</a>.</p></li>

   <li><p>Return <var>results</var>.</p></li>

  </ol>

  <p>A document must not contain any <a data-lt="concept item">items</a> for which the algorithm
  to find <a data-lt="item properties">the properties of an item</a> finds any
  <dfn>microdata error</dfn>.</p>

  <p>An <a data-lt="concept item">item</a> is a <dfn>top-level microdata item</dfn>
  if its element does not have an <code><a>itemprop</a></code> attribute.</p>

  <p>All <code><a>itemref</a></code> attributes in a <code>Document</code> must be such
  that there are no cycles in the graph formed from representing each <a data-lt="concept item">item</a>
  in the <code>Document</code> as a node in the graph and each <a lt="item properties">property</a> of an item whose
  <a data-lt="property value">value</a> is another item as an edge in the graph connecting those two items.</p>

  <!-- removed redundant requirement from above. But does this requirement serve any purpose? -->
  <p>A document must not contain an <code><a>itemprop</a></code> attribute
  that would not be a property of any <a data-lt="concept item">item</a>
  in that document were the <a data-lt="item properties">properties</a> all to be determined.</p>

  <div class="example">

   <p>In this example, a single license statement is applied to two works, using
   <code><a>itemref</a></code> from the items representing the works:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Photo gallery&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;My photos&lt;/h1&gt;
  &lt;figure itemscope itemtype="http://n.whatwg.org/work" itemref="licenses"&gt;
   &lt;img itemprop="work" src="images/house.jpeg" alt="A white house, boarded up, sits in a forest."&gt;
   &lt;figcaption itemprop="title"&gt;The house I found.&lt;/figcaption&gt;
  &lt;/figure&gt;
  &lt;figure itemscope itemtype="http://n.whatwg.org/work" itemref="licenses"&gt;
   &lt;img itemprop="work" src="images/mailbox.jpeg" alt="Outside the house is a mailbox. It has a leaflet inside."&gt;
   &lt;figcaption itemprop="title"&gt;The mailbox.&lt;/figcaption&gt;
  &lt;/figure&gt;
  &lt;footer&gt;
   &lt;p id="licenses"&gt;All images licensed under the &lt;a itemprop="license"
   href="http://www.opensource.org/licenses/mit-license.php"&gt;MIT
   license&lt;/a&gt;.&lt;/p&gt;
  &lt;/footer&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

   <p>The above results in two items with the type "<code>http://n.whatwg.org/work</code>",
   one with:</p>

   <dl class="brief">
    <dt>work
    </dt><dd><code>images/house.jpeg</code>
    </dd><dt>title
    </dt><dd>The house I found.
    </dd><dt>license
    </dt><dd><code>http://www.opensource.org/licenses/mit-license.php</code>
   </dd></dl>

   <p>...and one with:</p>

   <dl class="brief">
    <dt>work
    </dt><dd><code>images/mailbox.jpeg</code>
    </dd><dt>title
    </dt><dd>The mailbox.
    </dd><dt>license
    </dt><dd><code>http://www.opensource.org/licenses/mit-license.php</code>
   </dd></dl>

  </div>

</section>


</section>

<section id="converting-html-to-other-formats">
<h2>Converting Microdata to other formats</h2>

<section id="json">
<h3>JSON</h3>

  <p>Given a list of nodes <var>nodes</var> in a <code>Document</code>, a user agent must
  run the following algorithm to extract the microdata from those nodes into a JSON form:</p>

  <ol>

   <li><p>Let <var>result</var> be an empty object.</p></li>

   <li><p>Let <var>items</var> be an empty array.</p></li>

   <li><p>For each <var>node</var> in <var>nodes</var>, check if the element is a
   <a>top-level microdata item</a>, and if it is then
   <a href="#get-the-object">get the object</a> for that element and add it to <var>items</var>.</p></li>

   <li><p>Add an entry to <var>result</var> called "<code>items</code>" whose
   value is the array <var>items</var>.</p></li>

   <li><p>Return the result of serializing <var>result</var> to JSON in the shortest
   possible way (meaning no whitespace between tokens, no unnecessary zero digits in numbers, and
   only using Unicode escapes in strings for characters that do not have a dedicated escape
   sequence), and with a lowercase "<code>e</code>" used, when appropriate, in the
   representation of any numbers. [[JSON]]</p></li>

  </ol>

  <p class="note">This algorithm returns an object with a single property that is an array, instead
  of just returning an array, so that it is possible to extend the algorithm in the future if
  necessary.</p>

  <p>When the user agent is to <dfn id="get-the-object">get the object</dfn> for an item <var>item</var>,
  potentially together with a list of elements <var>memory</var>, it must run the following
  substeps:</p>

  <ol>

   <li><p>Let <var>result</var> be an empty object.</p></li>

   <li><p>If no <var>memory</var> was passed to the algorithm, let <var>memory</var> be an empty list.</p></li>

   <li><p>Add <var>item</var> to <var>memory</var>.</p></li>

   <li><p>If the <var>item</var> has any <a href="#item-types">item types</a>, add an entry to <var>result</var>
   called "<code>type</code>" whose value is an array listing the
   <a href="#item-types">item types</a> of <var>item</var>, in the order they were specified on the
   <code><a>itemtype</a></code> attribute.</p>

   </li><li><p>If the <var>item</var> has a <a href="#global-identifier">global identifier</a>, add an entry to
   <var>result</var> called "<code>id</code>" whose value is the <a href="#global-identifier">global
   identifier</a> of <var>item</var>.</p></li>

   <li><p>Let <var>properties</var> be an empty object.</p></li>

   <li>

    <p>For each element <var>element</var> that has one or more <a href="#property-names">property names</a>
    and is one of <a data-lt="item properties">the properties of the item</a>
    <var>item</var>, in the order those elements are given by the algorithm that returns
    <a data-lt="item properties">the properties of an item</a>, run the following substeps:</p>

    <ol>

     <li><p>Let <var>value</var> be the
     <a>property value</a> of <var>element</var>.</p></li>

     <li><p>If <var>value</var> is an <a data-lt="concept item">item</a>, then:
     If <var>value</var> is in <var>memory</var>, then let <var>value</var> be
     the string "<code>ERROR</code>". Otherwise, <a href="#get-the-object">get the object</a> for
     <var>value</var>, passing a copy of <var>memory</var>, and then replace <var>value</var>
     with the object returned from those steps.</p></li>

     <li>

      <p>For each name <var>name</var> in <var>element</var>'s
      <a href="#property-names">property names</a>, run the following substeps:</p>

      <ol>

       <li><p>If there is no entry named <var>name</var> in <var>properties</var>,
       then add an entry named <var>name</var> to <var>properties</var> whose
       value is an empty array.</p></li>

       <li><p>Append <var>value</var> to the entry named <var>name</var> in <var>properties</var>.</p></li>

      </ol>

     </li>

    </ol>

   </li>

   <li><p>Add an entry to <var>result</var> called "<code>properties</code>" whose
   value is the object <var>properties</var>.</p></li>

   <li><p>Return <var>result</var>.</p></li>

  </ol>

  <div class="example">

   <p>For example, take this markup:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;title&gt;My Blog&lt;/title&gt;
&lt;article itemscope itemtype="https://schema.org/BlogPosting"&gt;
 &lt;header&gt;
  &lt;h1 itemprop="headline"&gt;Progress report&lt;/h1&gt;
  &lt;p&gt;&lt;time itemprop="datePublished" datetime="2013-08-29"&gt;today&lt;/time&gt;&lt;/p&gt;
  &lt;link itemprop="url" href="?comments=0"&gt;
 &lt;/header&gt;
 &lt;p&gt;All in all, he's doing well with his swim lessons. The biggest thing was he had trouble
 putting his head in, but we got it down.&lt;/p&gt;
 &lt;section&gt;
  &lt;h1&gt;Comments&lt;/h1&gt;
  &lt;article itemprop="comment" itemscope itemtype="https://schema.org/UserComments" id="c1"&gt;
   &lt;link itemprop="url" href="#c1"&gt;
   &lt;footer&gt;
    &lt;p&gt;Posted by: &lt;span itemprop="creator" itemscope itemtype="https://schema.org/Person"&gt;
     &lt;span itemprop="name"&gt;Greg&lt;/span&gt;
    &lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;&lt;time itemprop="commentTime" datetime="2013-08-29"&gt;15 minutes ago&lt;/time&gt;&lt;/p&gt;
   &lt;/footer&gt;
   &lt;p&gt;Ha!&lt;/p&gt;
  &lt;/article&gt;
  &lt;article itemprop="comment" itemscope itemtype="https://schema.org/UserComments" id="c2"&gt;
   &lt;link itemprop="url" href="#c2"&gt;
   &lt;footer&gt;
    &lt;p&gt;Posted by: &lt;span itemprop="creator" itemscope itemtype="https://schema.org/Person"&gt;
     &lt;span itemprop="name"&gt;Charlotte&lt;/span&gt;
    &lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;&lt;time itemprop="commentTime" datetime="2013-08-29"&gt;5 minutes ago&lt;/time&gt;&lt;/p&gt;
   &lt;/footer&gt;
   &lt;p&gt;When you say "we got it down"...&lt;/p&gt;
  &lt;/article&gt;
 &lt;/section&gt;
&lt;/article&gt;</pre>

   <p>It would be turned into the following JSON by the algorithm above (supposing that the page's
   URL was <code>http://blog.example.com/progress-report</code>):</p>

   <pre>{
  "items": [
    {
      "type": [ "https://schema.org/BlogPosting" ],
      "properties": {
        "headline": [ "Progress report" ],
        "datePublished": [ "2013-08-29" ],
        "url": [ "http://blog.example.com/progress-report?comments=0" ],
        "comment": [
          {
            "type": [ "https://schema.org/UserComments" ],
            "properties": {
              "url": [ "http://blog.example.com/progress-report#c1" ],
              "creator": [
                {
                  "type": [ "https://schema.org/Person" ],
                  "properties": {
                    "name": [ "Greg" ]
                  }
                }
              ],
              "commentTime": [ "2013-08-29" ]
            }
          },
          {
            "type": [ "https://schema.org/UserComments" ],
            "properties": {
              "url": [ "http://blog.example.com/progress-report#c2" ],
              "creator": [
                {
                  "type": [ "https://schema.org/Person" ],
                  "properties": {
                    "name": [ "Charlotte" ]
                  }
                }
              ],
              "commentTime": [ "2013-08-29" ]
            }
          }
        ]
      }
    }
  ]
}</pre>

  </div>
</section>
  </section>

  <section id="other-changes-to-html5">
  <h2>Changes to HTML</h2>

  <section id="new-attributes">
  <h3>New attributes</h3>

  <p>This specification adds the following <a data-lt="global attribute">global attributes</a> and associated validity constraints to HTML:</p>

  <dl>

   <dt><a><code>itemscope</code></a></dt>
    <dd>This is a <a>boolean attribute</a>. When present on an element,
     it identifies that element as the container for an <a>item</a></dd>

   <dt><a>itemtype</a></dt>
    <dd>This is a list of <a data-lt="absolute URL">absolute URLs</a> that identify an <a>item</a> within a particular vocabulary.</dd>
    <dd>The <a>itemtype</a> attribute must not be specified on elements that do not have an <a>itemscope</a> attribute.</dd>
    <dd class="note">This attribute performs a function similar to the combination of <code>vocab</code> and <code>typeof</code> attributes in [[rdfa-core]].</dd>

   <dt><a>itemprop</a></dt>
    <dd>When present on an element, it identifies that the element provides the <a>property value</a>
     of the <a>item</a> in which it appears, for the property whose name is the content of the attribute</dd>
    <dd class="note">This attribute is equivalent to the <code>property</code> attribute in [[RDFA-CORE]].</dd>

   <dt><a>itemid</a></dt>
    <dd>This is an <a>absolute URL</a> that provides a global identifier for an <a>item</a>.</dd>
    <dd>The <a>itemid</a> attribute must not be specified on elements that do not have
     both an <a>itemscope</a> attribute and an <a><code>itemtype</code></a> attribute specified.</dd>
    <dd>The <a>itemid</a> attribute must not be specified on elements with an <a><code>itemscope</code></a> attribute
     whose <a>itemtype</a> attribute specifies a vocabulary that does not <a>support global identifiers for items</a>.</dd>
   <dd class="note">This is approximately equivalent to declaring that an <a>item</a> is
    <code>owl:sameAs</code> the value of the attribute. [[owl-ref]]</dd>

   <dt><a><code>itemref</code></a></dt>
    <dd>This is a space seperated list of <a data-lt="ID">IDs</a> of elements
     which are not descendants of the element on which it appears. It identifies each element whose <a>ID</a> it includes
     as defining a property of the <a>item</a> on which it is present.</dd>
    <dd>The <a>itemref</a> attribute must not be specified on elements that do not have an <a>itemscope</a> attribute.</dd>

  </dl>
  </section>

  <section id="content-models">
  <h3>Content models</h3>

  <p>This section changes the content models defined by HTML in the following ways:</p>

  <p>The <code>content</code> attribute redefined by this specification as a <a>global attribute</a>
  that may be present on that element.</p>
  <p class="Note">This is consistent with [[HTML-RDFA]], which uses the attribute for the same purpose.</p>

  <p>If the <code><a>itemprop</a></code> attribute is present on a <code>link</code> or <code>meta</code> element,
  that element is <a href="#flow-content">flow content</a> and <a href="#phrasing-content">phrasing content</a>,
  and may be used where <a href="#phrasing-content">phrasing content</a> is expected.</p>

  <p>If a <code>link</code> element has an <code><a>itemprop</a></code>
    attribute, the <code>rel</code> attribute may be omitted.</p>

  <p>If a <code>meta</code> element has an <code><a>itemprop</a></code>
  attribute, the <code>name</code>, <code>http-equiv</code>, and <code>charset</code> attributes must be omitted,
  and the <code>content</code> attribute must be present.</p>

  <p>If the <code><a>itemprop</a></code> attribute is specified
  on an <code>a</code> or <code>area</code> element, then the <code title="attr-hyperlink-href">href</code> attribute must also be
  specified.</p>

  <p>If the <code><a>itemprop</a></code> attribute is specified on an <code>audio</code>, <code>embed</code>,
   <code>iframe</code>, <code>img</code>, <code>source</code>, <code>track</code>, or <code>video</code>
   element, then the <code>src</code> attribute must also be specified.</p>

  <p>If the <code><a>itemprop</a></code> attribute is specified
  on an <code>object</code> element, then the <code>data</code> attribute must also be
  specified.</p>

<!--/YYY-->
  </section>

</section>


  <section id="a11y-considerations">
  <h2>Accessibility and microdata</h2>
  <p><i>This section is not normative</i></p>
  <p>Microdata can be used to provide machine-parseable information
    about content that is processed by tools to improve accessibility.</p>
  <p>When editing content that contains microdata, authors should consider the possibility that this is the case.
    Authoring and content management tools should implement the Authoring Tool Accessibility Guidelines,
    and in this context note Guideline 
    <a href="https://www.w3.org/TR/ATAG20/#gl_b12">B1.1.2 - Ensure Accessibility Information is Preserved</a>, 
    if applicable drawing attention to the fact that changes in content may mean the encoded metadata is not accurate. [[ATAG20]]</p>
  <p>Authors should be aware that a great deal of accessibility information is ignored in extracting microdata,
    including attributes such as <code>alt</code> and ARIA information. Authors should consider whether to 
    encode accessibility information explicitly, or to use a more expressive approach such as RDFa. [[RDFA-CORE]]
  </section>

  <section id="i18n-considerations">
  <h2>Internationalisation and localisation</h2>
  <p><i>This section is not normative</i></p>
  <p>Microdata conversion means that almost all internationalisation-related information is lost, 
    except if it is specifically encoded as microdata, in which case it is important to pay attention when editing, as above for accessibility.</p>
  <p>Machine-readable data may be presented to users, for example by search engines. Identifying content that should,
  or should not, be translated, would be helpful but currently microdata strips markup. It is possible to use XMLLiterals in
  RDFa to ensure that markup is kept. [[RDFA-CORE]]</p>
  <p>Vocabulary design is difficult. Different languages and cultures present view ambiguity differently:
  two terms with different meanings in one situation may be most naturally translated by a single term that has both meanings,
  or a single term may have two natural translations. When developing for localisation, it is important to provide
  sufficient contextual information about terms in a vocabulary to enable accurate translation.</p>
  </section>

  <section id="privacy-considerations">
  <h2>Privacy Considerations</h2>
  <p><i>This section is not normative</i></p>
  <p>Microdata does not introduce new mechanisms to transmit privacy-sensitive information.
    However it more clearly identifies information,
    in a way that facilitates finding data and merging it with data from other sources.</p>
  <p>Authors and processors should take care to ensure that their use of microdata is in line with privacy policies
  and any applicable regulation.</p>
  </section>

  <section id="security-considerations">
  <h2>Security Considerations</h2>
  <p><i>This section is not normative</i></p>
  <p>Microdata does not generally interact with browsers, being a static document format that lacks any DOM interface.</p>

  <p>Microdata makes information machine-readable,
  but does not automatically include provenance information for the statements it encodes.</p>

  <p>Processors of microdata should consider the trustworthiness of sources they use,
  including the possibility that data is no longer accurate,
  and the possibility that data gathered over an insecure connection has been altered by a "man-in-the-middle" attack.</p>
  </section>

  <section id="iana">
<h2>IANA considerations</h2>

  <!-- http://www.w3.org/2002/06/registering-mediatype.html -->

  <h1 id="application/microdata+json"><dfn><code>application/microdata+json</code></dfn></h1>


  <p>This registration is for community review and will be submitted
  to the IESG for review, approval, and registration with IANA.</p>

  <!--
   To: ietf-types@iana.org
   Subject: Registration of media type application/microdata+json
  -->

  <dl>
   <dt>Type name:</dt>
   <dd>application</dd>
   <dt>Subtype name:</dt>
   <dd>microdata+json</dd>
   <dt>Required parameters:</dt>
   <dd>Same as for <code>application/json</code> [[JSON]]</dd>
   <dt>Optional parameters:</dt>
   <dd>Same as for <code>application/json</code> [[JSON]]</dd>
   <dt>Encoding considerations:</dt>
   <dd>8bit (always UTF-8)</dd>
<!--ADD-TOPIC:Security-->
   <dt>Security considerations:</dt>
   <dd>Same as for <code>application/json</code> [[JSON]]</dd>
<!--REMOVE-TOPIC:Security-->
   <dt>Interoperability considerations:</dt>
   <dd>Same as for <code>application/json</code> [[JSON]]</dd>
   <dt>Published specification:</dt>
   <dd>
    Labeling a resource with the
    <code><a href="#application/microdata+json">application/microdata+json</a></code> type asserts that the
    resource is a JSON text that consists of an object with a single
    entry called "<code>items</code>" consisting of an array
    of entries, each of which consists of an object with an entry
    called "<code>id</code>" whose value is a string, an
    entry called "<code>type</code>" whose value is another
    string, and an entry called "<code>properties</code>"
    whose value is an object whose entries each have a value
    consisting of an array of either objects or strings, the objects
    being of the same form as the objects in the aforementioned "<code>items</code>" entry.
    Thus, the relevant specifications
    are the JSON specification and this specification. [[JSON]]
   </dd>
   <dt>Applications that use this media type:</dt>
   <dd>
    <p>Applications that transfer data intended for use with HTML's microdata feature, especially in
    the context of drag-and-drop, are the primary application class for this type.</p>
   </dd>
   <dt>Additional information:</dt>
   <dd>
    <dl>
     <dt>Magic number(s):</dt>
     <dd>Same as for <code>application/json</code> [[JSON]]</dd>
     <dt>File extension(s):</dt>
     <dd>Same as for <code>application/json</code> [[JSON]]</dd>
     <dt>Macintosh file type code(s):</dt>
     <dd>Same as for <code>application/json</code> [[JSON]]</dd>
    </dl>
   </dd>
   <dt>For further information:</dt>
   <dd><a href="https://github.com/w3c/microdata/">https://github.com/w3c/microdata/</a></dd>
   <dt>Intended usage:</dt>
   <dd>Common</dd>
   <dt>Restrictions on usage:</dt>
   <dd>No restrictions apply.</dd>
   <dt>Author:</dt>
   <dd>W3C</dd>
   <dt>Change controller:</dt>
   <dd>W3C</dd>
  </dl>

  <p>Fragment identifiers used with
  <code><a href="#application/microdata+json">application/microdata+json</a></code> resources have the same
  semantics as when used with <code>application/json</code> (namely,
  at the time of writing, no semantics at all). [[JSON]]</p>


  </section>

  <section id="changes">
  <h2>Changes</h2>

  <p>An exact history of changes to the text is available in the <a href="https://github.com/w3c/microdata/commits">Github commit log</a>.
  The following information is provided as an overview of the substantive changes made to the specification between each publication.</p>

  <p>Changes made between the current draft and the <a href="https://www.w3.org/TR/2017/WD-microdata-20170504/">First Public Working Draft</a>:</p>

  <ul>
    <li>Allow <a>itemid</a> in general, rather than expecting vocabularies to explain what it means.</li>
    <li>Add a mechanism to determine the URL that is a <a>vocabulary identifier</a>,
      and use it as the start of the property name for any <a>typed item</a>.</li>
   <li>Remove section "microdata and other namespaces" which implied that microdata would not work in other namespaces. Because it does.</li>
   <li>Allow the <code>content</code> attribute on any element where an <a>itemprop</a> attribute is present,
     to provide a readable value for a property.</li>
   <li>Adjust the algorithm for determining the <a>value</a> of a name-value pair, to match implementation:
     <ul><li><code>data</code>, <code>meter</code>, and <code>time</code> elements' <a>textContent</a> is used
       if they do not have an attribute that supplies the <a>value</a>.</li>
       <li>If there is a <code>content</code> attribute present, it provides the <a>value</a>.</li></ul></li>
    <li>Added non-normative sections for <a href="#a11y-considerations">Accessibility and microdata</a>,
      <a href="i18n-considerations">Internationalisation and localisation</a>, <a href="#privacy-considerations">Privacy</a>,
      and <a href="#security-considerations">Security Considerations</a>.
   <li>Remove drag and drop, as it is not implemented in current browsers.</li>
  </ul>

  <p>Changes made between the <a href="https://www.w3.org/TR/2017/WD-microdata-20170504/">First Public Working Draft</a> and the
  <a href="http://www.w3.org/TR/2013/NOTE-microdata-20131029/">23 October 2013 W3C Note</a>:</p>

  <ul>
   <li>Remove DOM API. This API has been removed from browsers that did implement it.</li>
   <li>Remove unused references</li>
  </ul>

</section>

  <section id="acknowledgements">
  <h2>Acknowledgements</h2>

  <p>The original specification for Microdata was developed by Ian Hickson. Without him this specification would not exist.
  Uptake has been substantially been driven by its use for the schema.org vocabulary.</p>

  <p>The current editors would like to thank the following people for direct contributions to this work:</p>

  <p>

Christine Runnegar,
Gregg Kellogg,
Ivan Herman,
Jens Oliver Meiert,
Léonie Watson,
Manu Sporny,
Marcos Caceres,
Nick Doty,
Philippe Le Hégaret,
Ralph Swick,
Robin Berjon,
Tab Atkins,
Tavis Tucker,
Tobie Langel,
Xiaoqian Wu,
Yves Lafon.
  </p>

  </section>
  
</body></html>
